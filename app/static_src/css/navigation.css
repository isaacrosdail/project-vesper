
/* ==== Navigation ====
    Base navlinks/navbar styling (desktop-first
*/


/* Hamburger button -> X animation */
.hamburger-btn .line1,
.hamburger-btn .line2,
.hamburger-btn .line3 {
    /* Use fill-box so each line rotates around its own bounding box, not the SVG ViewBox */
    transform-box: fill-box;
    transition: transform 0.2s ease-out;
}
.hamburger-btn .line2 {
    transition: opacity var(--transition-fade, 0.2s ease-out);
}
.hamburger-btn.is-open .line1 {
    transform: rotate(var(--hamburger-angle)) scaleX(var(--hamburger-scale));
    transform-origin: left center;
}
.hamburger-btn.is-open .line3 {
    transform: rotate(calc(-1 * var(--hamburger-angle))) scaleX(var(--hamburger-scale));
    transform-origin: left bottom;
}
.hamburger-btn.is-open .line2 {
    opacity: 0;
}

.nav-desktop {
    display: flex;
    gap: var(--gap-lg);
}
.nav-link {
    position: relative;
    flex-shrink: 1;
    padding: var(--space-sm);
    white-space: nowrap;
}
.nav-link::after {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 3px;
    content: "";
    background: var(--accent-subtle);
    transition: width 0.1s ease;
}
.nav-link:focus-visible {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
}


nav {
    position: relative; /* positioning context for z-index, force nav to participate in stacking context */
    z-index: 250;       /* above mobile nav */
    min-height: var(--min-navbar-height);
    padding: var(--space-md);
    background-color: var(--accent-strong);
}
.nav-anchor {
    position: relative; /* positioning context for mobile nav slidedown */
}

.navbar-content {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    max-width: 80rem;
    margin: 0 auto;
}

.nav-left, .nav-right {
    display: flex;
    gap: clamp(var(--gap-sm), 1.5vw, var(--gap-md));
    align-items: center;
}
.nav-right {
    margin-left: auto; /* push to right */
}
.branding {
    margin-right: var(--space-lg);
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
}

/* Container: visibility, positioning, stacking */
.nav-mobile-container {
    position: absolute;
    inset: 100% 0 auto;
    z-index: 201;
    padding: var(--space-xs);
    pointer-events: none;
    background-color: var(--accent-strong);
    opacity: 0;
    transform: translateY(-300px) scaleY(0.95); /* start above viewport & slightly compressed */
    transform-origin: top center;
    transition: 
        transform 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
}
.nav-mobile-container.is-open {
    display: flex;
    flex-direction: column;
    gap: var(--gap-lg);
    pointer-events: auto;
    opacity: 1;
    transform: translateY(0) scaleY(1);
}

.nav-mobile {
    display: flex;
    flex-direction: column;
    gap: var(--gap-lg);
    align-items: center;
    width: 100%;
}
.nav-mobile a {
    display: block; /* each line fills parent's width */
    width: 100%;
    padding: var(--space-md) var(--space-md);
    text-align: center;
}