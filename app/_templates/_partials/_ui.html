{# _macros.html - Style macros for consistent styling across templates #}
{# <!--
REMEMBER:
If we're defining reusable batch styles → style.css (.input-standard, .form-group)
If we're defining reusable COMPONENTS (with structure/behavior/logic) → here ({{ form_input() }}, {{ card() }})
  - Components = HTML structure + behavior + logic
  - Styles = just CSS classes
--> #}

{#
    Notes for custom modals: Keyboard nav, aria-label param,    
#}


{# Responsive Tables #}

{% macro responsive_table(caption, headers, items, module_name, subtype) %}
<table id="{{ subtype }}-table" class="table-standard">
  <caption class="_sr-only">{{ caption }}</caption>
  <thead class="table-header">
    <tr>
      {% for col in headers %}
        <th class="{{ col.priority }}">{{ col.label }}</th>
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% if items %}
      {% for item in items %}
        <tr class="table-row" data-item-id="{{ item.id }}" data-module="{{ module_name }}" data-subtype="{{ subtype }}">
          {{ caller(item, headers) }}
          <td class="table-cell delete-cell">
            {{ delete_btn() }}
          </td>
        </tr>
      {% endfor %}
    {% else %}
        <tr>
          <td colspan="99" class="table-empty">
            No entries yet.
          </td>
        </tr>
    {% endif %}
  </tbody>
</table>
{% endmacro %}


{# === MODALS === #}

{# Entry form modal #}

{# caller() segment here lets us put whatever 'insides' we want in our modals #}
{# by sandwiching them between 'call ourmacro(ourparameters,..)' and 'endcall' #}
{# TODO: NOTES: {% call %} doesn't work with a template that doesn't use caller() #}
{% macro modal(endpoint, id, title) %}
<dialog id="{{ id }}-modal" data-endpoint="/{{ endpoint }}">
    <form>
        <legend>{{ title }}</legend>
        <button type="button" class="btn-icon btn-round modal-close" id="{{ id }}-modal-close-btn" aria-label="Close">{{ x_svg() }}</button>
        {{ caller() }}
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
</dialog>
{% endmacro %}


{# Confirmation Modal #}

{% macro confirmation_modal() %}
<dialog id="confirmation-modal">
  <div class="confirmation-content">
    <p class="confirmation-message">Are you sure?</p>
    <div class="form-actions">
      <button id="confirm-cancel" class="btn btn-secondary">Cancel</button>
      <button id="confirm-ok" class="btn btn-primary">OK</button>
    </div>
  </div>
</dialog>
{% endmacro %}


{# Toast Container #}

{% macro toast_container() %}
<div id="toast-container"></div>
{% endmacro %}

{# === LINKS === #}

{# Link for returning from error page(s) #}

{% macro error_link(text, endpoint) %}
<a href="{{ url_for(endpoint) }}"
    class="error-link btn btn-primary">
    {{ text }}
</a>
{% endmacro %}


{# === BUTTON COMPONENTS === #}

{# Note: btn-icon btn-destructive for styling, delete-btn for our JS event listener #}
{% macro delete_btn() %}
<button aria-label="Delete item" class="btn-icon btn-square btn-destructive delete-btn">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
    <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
  </svg>
</button>
{% endmacro %}

{% macro plus_btn(id=None, aria_label=None, extra_classes="") %}
<button class="btn-icon btn-round btn-primary {{ extra_classes }}"
        {% if id %} id="{{ id }}"{% endif %}{% if aria_label %} aria-label="{{ aria_label }}"{% endif %}
>
  {{ plus_svg() }}
</button>
{% endmacro %}

{# Plus/Minus SVGs #}

{% macro plus_svg() %}
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
</svg>
{% endmacro %}

{% macro minus_svg() %}
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6 12h12" />
</svg>
{% endmacro %}

{% macro hamburger_svg() %}
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
  <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 5.5h16.5M3.75 12h16.5m-16.5 6.5h16.5" />
</svg>
{% endmacro %}

{% macro x_svg() %}
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
  <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
</svg>
{% endmacro %}

{% macro scale_svg() %}
<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
  <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z" />
</svg>
{% endmacro %}

{% macro sleep_svg() %}
<svg class="first-svg" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none">
  <path stroke-linecap="round" stroke-linejoin="round" 
      d="M 8 7 C -4.5 15, 10 30.6, 18.65 17.9 C 6 21, 6.5 9.7, 8 7"/>
</svg>
{% endmacro %}