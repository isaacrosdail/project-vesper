/* ==== CSS CUSTOM PROPERTIES (DESIGN TOKEN SYSTEM) ==== */
/* TODO: Ensure I can explain this system perfectly */
/*
* Architecture:
* 1. Theme-specific tokens (--light-*, --dark-*) = actual color values
* 2. Semantic tokens (--bg-dark, --accent-text) = sort of a translation layer to decouple
* 3. Theme switching = CSS that remaps semantic tokens to active theme.
*
* This lets components stay theme-agnostic while supporting unlimited themes (especially once Firefox supports container queries!)
* HMTL never changes, CSS handles all the complexity.
*/
:root {
    /* Global constants */
    --color-success: #166534;
    --color-error: #dc2626;    

    /* =============== LIGHT THEME DEFINITIONS =============== */
    color-scheme: light;

    /* Note: For inverted text, simply directly use the opposite theme's (below in theme mappings, not incl. in definitions obv) */
    /* Example: (on light mode): */
    /* === NEUTRALS === */
    --light-bg-dark: hsl(0 0 90);     /* Pure white base => Main page/canvas background */
    --light-bg: hsl(0 0 95);          /* Subtle off-white => Cards, modals, main content areas */
    --light-bg-light: hsl(0 0 100);   /* input fields. Secondary button backgrounds, alternating rows  */

    --light-text: hsl(0 0 5);           /* for headers/etc, High contrast */
    --light-text-muted: hsl(0 0 30);    /* main text, slightly muted from that */


    --light-border: hsl(0 0% 30%); /* Borders */


    /* --light-accent-text: oklch(87.2% 0.01 258.338);Branded text ("Vesper"), nav items (must work on dark backgrounds) (Tailwind's text-gray-300) */
    --light-text-destructive: hsl(0, 84%, 60%); /* For delete buttons, for example (Tailwind's text-red-500) */
    /* === UI ELEMENTS / ACCENT COLOR(S) === */
    --light-accent-darker: oklch(60% 0.12 250); /* navbar & table headers (AND primary buttons?) */
    --light-accent-lighter: oklch(70% 0.12 250); /* Lighter variant of accent color to be used for CTAs, subtler visual notes throughout app */
    --light-ui-hover: oklch(85% 0.05 250);

    /* TODO: Selection text stuff */
    --light-bg-selection: grey;   /* Text selection background */
    --light-text-selection: blue;
    /* =============== END LIGHT THEME DEFINITIONS =============== */

    
    /* =============== DARK THEME DEFINITIONS =============== */
    /* === BACKGROUND HIERARCHY === */
    --dark-bg-dark: hsl(0 0 0);     /* Main page/canvas background (darker) */
    --dark-bg: hsl(0 0 5);          /* Lifted surface: Cards, modals, main content areas */
    --dark-bg-light: hsl(0 0 10);       /* Input fields too? Buttons, dropdowns, menus, toggles, etc. Secondary button backgrounds, alternating rows, muted backgrounds */

    --dark-text: hsl(0 0 95); /* Sharper, higher contrast color for headings/important elements */
    --dark-text-muted: hsl(0 0 70); /* Slightly muted shade for most text */


    --dark-text-destructive: hsl(0, 84%, 60%);
    /* === UI ELEMENTS / ACCENT COLOR(S) === */
    --dark-accent-darker: oklch(40% 0.12 250);   /* navbar & table headers (AND primary buttons?) */
    --dark-accent-lighter: oklch(70% 0.12 250);
    --dark-ui-hover: oklch(85% 0.05 250);

    /* === BORDERS === */
    --dark-border: hsl(0 0% 30%);             /* darker borders */
    /* Selection stuff */
    --dark-bg-selection: grey;      /* Text selection background */
    --dark-text-selection: yellow;

    /* =============== END DARK THEME DEFINITIONS =============== */

    /* ACTIVE THEME MAPPINGS - LIGHT THEME (default) */
    /* === BACKGROUND HIERARCHY === */
    --bg-dark: var(--light-bg-dark);
    --bg: var(--light-bg);
    --bg-light: var(--light-bg-light);

    --text-muted: var(--light-text-muted);
    --text: var(--light-text);

    --border: var(--light-border);
    --gradient: linear-gradient(0deg, var(--bg) 95%, var(--bg-light));


    /* --accent-text: var(--light-accent-text); */
    --text-destructive: var(--light-text-destructive);
    --text-inverse: var(--dark-text); /* Note: Using dark's sharper text as inverse */

    /* === UI ELEMENTS / ACCENT COLOR(S) === */
    --accent-darker: var(--light-accent-darker);
    --accent-lighter: var(--light-accent-lighter);
    --ui-hover: var(--light-ui-hover);

    /* selection stuff */
    --bg-selection: var(--light-bg-selection);
    --text-selection: var(--light-text-selection);
    /* END ACTIVE THEME MAPPINGS - LIGHT THEME (default) */

    
    @media (prefers-color-scheme: dark) {
        /* --theme: moon; */
        color-scheme: dark;

        /* ACTIVE THEME MAPPINGS - dark THEME (default) */
        /* === BACKGROUND HIERARCHY === */
        --bg-dark: var(--dark-bg-dark);
        --bg: var(--dark-bg);
        --bg-light: var(--dark-bg-light);

        --text-muted: var(--dark-text-muted);     
        --text: var(--dark-text);


        --border: var(--dark-border);
        --gradient: linear-gradient(0deg, var(--bg) 95%, var(--bg-light));


        /* --accent-text: var(--dark-accent-text); */
        --text-destructive: var(--dark-text-destructive);
        --text-inverse: var(--light-text); /* Note: Using light's sharper text as inverse */

        /* === UI ELEMENTS / ACCENT COLOR(S) === */
        --accent-darker: var(--dark-accent-darker);
        --accent-lighter: var(--dark-accent-lighter);
        --ui-hover: var(--dark-ui-hover);

        /* selection stuff */
        --bg-selection: var(--dark-bg-selection);
        --text-selection: var(--dark-text-selection);
        /* END ACTIVE THEME MAPPINGS - dark THEME (default) */
    }
}

/* User Override: Lets the user manually override the system preference with toggle buttons */
:root:has([value="sun"]:checked),
:root[data-theme="light"] {
    /* --theme: sun; */
    color-scheme: light;

    /* ACTIVE THEME MAPPINGS - LIGHT THEME */
    /* === BACKGROUND HIERARCHY === */
    --bg-dark: var(--light-bg-dark);
    --bg: var(--light-bg);
    --bg-light: var(--light-bg-light);

    --text-muted: var(--light-text-muted);
    --text: var(--light-text);
    --text-destructive: var(--light-text-destructive);
    --text-inverse: var(--dark-text); /* Note: Using dark's sharper text as inverse */


    --border: var(--light-border);
    --gradient: linear-gradient(0deg, var(--bg) 95%, var(--bg-light));



    /* === UI ELEMENTS / ACCENT COLOR(S) === */
    --accent-darker: var(--light-accent-darker);
    --accent-lighter: var(--light-accent-lighter);
    --ui-hover: var(--light-ui-hover);


    /* selection stuff */
    --bg-selection: var(--light-bg-selection);
    --text-selection: var(--light-text-selection);
    /* END ACTIVE THEME MAPPINGS - LIGHT THEME (default) */
}

:root:has([value="moon"]:checked),
:root[data-theme="dark"] {
    /* --theme: moon; */
    color-scheme: dark;

    /* ACTIVE THEME MAPPINGS - dark THEME (default) */
    /* === BACKGROUND HIERARCHY === */
    --bg-dark: var(--dark-bg-dark);
    --bg: var(--dark-bg);
    --bg-light: var(--dark-bg-light);

    --text: var(--dark-text);
    --text-muted: var(--dark-text-muted);
    --text-inverse: var(--light-text); /* TODO: Do we even need this? Note: Using light's sharper text as inverse */
    --text-destructive: var(--dark-text-destructive);


    --border: var(--dark-border);
    --gradient: linear-gradient(0deg, var(--bg) 95%, var(--bg-light));


    /* === UI ELEMENTS / ACCENT COLOR(S) === */
    --accent-darker: var(--dark-accent-darker);
    --accent-lighter: var(--dark-accent-lighter);
    --ui-hover: var(--dark-ui-hover);

    /* selection stuff */
    --bg-selection: var(--dark-bg-selection);
    --text-selection: var(--dark-text-selection);
    /* END ACTIVE THEME MAPPINGS - dark THEME (default) */
}