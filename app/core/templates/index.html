 <!-- Main Dashboard UI -->

{% extends "base.html" %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container"> <!-- px-4 = 1rem left + right, sm:px-8 = wider padding on screens >= 640px -->
    <!-- Greeting & Time/Date Card -->
    <section id="greeting-card" class="dashboard-card">
        <div class="time-section">
            <h1 class="text-xl font-semibold mb-2">
                {% if current_user.is_authenticated %}
                    {{ greeting }}, {{ current_user.name }}!
                {% else %}
                    {{ greeting }}
                {% endif %}
            </h1>
            <p><span id="time-display">{{ now.strftime("%H:%M:%S") }}</span> | {{ now.strftime("%A, %B %d") }}</p>
        </div>
        <div class="divider"></div>
        <div class="weather-section">
            <div id="weather-temp"></div>
            <div id="weather-sunset"></div>
            <!-- Learning canvas for our sun :D -->
            <canvas id="sun-canvas" width="200" height="100"></canvas>
        </div>

    </section>

    <!-- Critical Task Card bg-gray-200 p-6 rounded-xl shadow-lg -->
    <section id="today-intention-card" class="dashboard-card">
        <h2 class="text-xl font-semibold mb-2">Critical Task</h2>
        <p>
            <span>Today's Intention: </span>
            <span id="intention-text" class="placeholder-text">
                {{ today_intention.intention if today_intention.intention else "What's your focus today?" }}
            </span>
        </p>
    </section>

    <!-- Daily Habits Card -->
    <section id="daily-habits-card" class="dashboard-card">
        <h2 class="text-xl font-semibold mb-2">Daily Habits</h2>
        <!-- Just print names in UL for now -->
        <ul>
        {% for habit in habits %}
            <li>
                <input type="checkbox"
                    class="habit-checkbox"
                    data-habit-id="{{ habit.id }}"
                    {% if habit_info[habit.id].completed_today %}checked{% endif %}>

                <span class="habit-title text-sm bg-blue-100 text-blue-700 px-2 py-1 rounded {% if habit_info[habit.id].completed_today %}line-through text-gray-400{% endif %}"> <!-- UNSURE ABOUT THIS STYLING -->
                    {{ habit.title }}
                </span>
                
                <span class="text-sm">
                    {% if habit_info[habit.id].streak_count > 0 %}
                     ðŸ”¥{{ habit_info[habit.id].streak_count }}
                    {% endif %}
                </span>
            </li>
        {% endfor %}
        </ul>
    </section>
    
    <!-- Daily Check-In Card -->
    <!-- TODO: Scrap our 'data-' things in this card. Used more for storing custom data on elements not for grabbing them -->
    <section id="daily-check-in-card" class="dashboard-card">
        <h2 class="text-xl font-semibold mb-2">Daily Check-In</h2>
        <!-- Content: weight, steps, movement (mins), stress (scale), energy (scale) -->

        <div class="form-group">
            <label for="weight">Weight:</label>
            <input class="input-inline" type="number" name="weight" data-metric="weight" data-unit="lbs" placeholder="lbs">
        </div>
        <div class="form-group">
            <label for="steps">Steps:</label>
            <input class="input-inline" type="number" name="steps" data-metric="steps" data-unit="steps" placeholder="0">
        </div>
        <div class="form-group">
            <label for="movement">Movement:</label>
            <input class="input-inline" type="number" name="movement" data-metric="movement" data-unit="minutes" placeholder="mins">
        </div>
        <div class="form-group">
            <label for="stress">Stress:</label>
            <input class="input-inline" type="range" name="stress" data-checkin="stress_level" min="1" max="10">
        </div>
        <div class="form-group">
            <label for="energy">Energy:</label>
            <input class="input-inline" type="range" name="energy" data-checkin="energy_level" min="1" max="10">
        </div>
        <div class="form-group">
            <label for="mood">Mood:</label>
            <input class="input-inline" type="range" name="mood" data-checkin="mood" min="1" max="10">
        </div>

        <div class="form-group">
            <label for="">Sleep Time</label>
            <input class="input-inline" type="time" name="sleep_time">
        </div>
        <div class="form-group">
            <label for="">Wake Time</label>
            <input class="input-inline" type="time" name="wake_time">
        </div>
        <div class="form-group">
            <label for="">Calories</label>
            <input class="input-inline" type="text">
        </div>
        <div class="form-group">
            <label for="">Screen Time</label>
            <input class="input-inline" type="text">
        </div>
        <!-- Eventually use a camera to gauge this? -->
        <div class="form-group">
            <label for="">Room Tidiness?</label>
            <input class="input-inline" type="range" min="1" max="10">
        </div>
        <div class="form-group">
            <!-- Have a "meds list" table? Then select from here in a dropdown -->
            <!-- Also: Use created_at for time taken? OR allow for option using datetime form -->
            <label for="">Med Taken:</label>
            <input class="input-inline" type="text">
        </div>
        <div class="form-group">
            <label for="">EOD Balance: </label>
            <input class="input-inline" type="number">
        </div>
        <div class="form-group">
            <!-- Make a button like "-/+ glass"? More optimal size/UX -->
            <label for="">Water Intake</label>
            <input class="input-inline" type="text">
        </div>
    </section>

    <!-- Activity Log Entry Card -->
    <!-- Roll our own JS validation for this instead of using form and intercepting with .preventDefault() -->
    <!-- TODO: Develop 2-3 style macros for different types of inputs & buttons - these don't quite fit here -->
    <!-- Consider converting this to a modal rather than being sorta an inline input? -->
    <section id="activity-log-card" class="dashboard-card p-6">
        <h2 class="text-xl font-semibold mb-2">Daily Time Log Entry</h2>

        <div class="form-group">
            <label for="category">Category:</label>
            <input type="text" id="category" class="input-standard">
        </div>
        <div class="form-group">
            <label for="duration">Duration:</label>
            <input type="number" id="duration" min="0" class="input-standard">
        </div>
        <div class="form-group">
            <label for="description">Description (Optional):</label>
            <input type="text" id="description" class="input-standard">
        </div>
        <button id="save-entry-btn" class="btn-primary">Save Entry</button>
    </section>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename = 'js/core/index.js') }}"></script>
{% endblock %}