<!-- Base Class Template -->

<!DOCTYPE html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Vesper{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'css/output.css') }}"> <!-- For Tailwind styling -->
</head>
<body class="h-full">
    <div class="wrapper">
        {% include 'navbar.html' %}

        {# Style reference classes - available in all templates #}

        <!-- Table style sets -->
        {% set table_classes = "caption-top table-auto border-collapse w-full text-sm" %}
        {% set th_classes = "px-2 py-2 border border-gray-300" %}
        {% set td_classes = "px-2 py-2 border border-gray-300" %}
        {% set tr_classes = "task-row group even:bg-gray-100 odd:bg-white hover:bg-gray-400 hover:text-white transition-colors duration-25" %}

        {% set input_classes = "border border-gray-400 rounded px-3 py-2 w-full bg-white text-gray-800 placeholder-gray-400 shadow-sm" %}
        {% set label_classes = "border" %}
        {% set submit_classes = "bg-white border border-gray-400 rounded px-4 py-2 text-gray-800 hover:bg-blue-400 cursor-pointer w-full" %}
        {% set btn_classes = "border border-gray-300 inline-block px-4 py-2 mx-2 mt-1 text-sm rounded-md bg-gray-200 text-gray-800 hover:bg-gray-300 hover:shadow transition" %}

        <!-- For flash() -->
        {% with messages = get_flashed_messages() %}  <!-- "if flask has any msgs saved, pull them into this variable called messages" -->
            {% if messages %}
            <div id="flash-message" class="bg-green-100 text-green-800 px-4 py-2 rounded shadow mb-4">
                {% for message in messages %}
                <p>{{ message }}</p>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        <div class="content">
            {% block content %}{% endblock %}
        </div>
            
        <footer class="bg-gray-100 text-center text-sm py-4">
            &copy; 2025
        </footer>
    </div>

    {% block scripts %}
    <!-- Script to add listener that allows flash() messages to auto-fade & then disappears -->
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            console.log("flash script running");
            const flash = document.getElementById('flash-message');
            if (flash) {
                setTimeout(() => {
                    flash.style.opacity = '0'; // fade?
                    flash.style.pointerEvents = 'none'; // ?
                    setTimeout(() => flash.remove(), 1000); // then remove after fade
                }, 2000);
            }
        });
    </script>
    {% endblock %}
</body>
</html>