<!-- View grocery items -->

{% extends "base.html" %}

{% block title %}Groceries{% endblock %}

{% block content %}
    <div class="table-wrapper">
        <table class="caption-top">
            <caption>
                Grocery - Products in my Inventory
            </caption>
            <thead>
                <tr>
                    <th>Barcode</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Date Scanned</th>
                </tr>
            </thead>
            <tbody>
                {% if transactions %}
                    {% for transaction in transactions %}
                    <tr class="group" data-item-id="{{ transaction.transaction_id }}">
                        <td>{{ transaction.product.barcode }}</td>
                        <td>
                            <span class="product-name">{{ transaction.product.product_name }}</span>
                        </td>
                        <td>{{ transaction.price_at_scan }}</td>
                        <td>{{ transaction.quantity }}</td>
                        <td onclick="deleteTableItem('groceries', '{{ transaction.transaction_id }}', 'transaction')">
                            <button class="delete-btn group-hover:visible invisible">Delete</button>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center text-gray-500 italic py-2">
                            No transactions yet.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    <a href="{{ url_for('groceries.add_transaction')}}" class="button">
        Log New Transaction
    </a>
    <div class="table-wrapper">
        <table class="caption-top">
            <caption>
                Lifetime Products Scanned In
            </caption>
            <thead>
                <tr>
                    <th>Barcode</th>
                    <th>Product Name</th>
                    <th>Price</th>
                    <th>Net Weight</th>
                </tr>
            </thead>
            <tbody>
                {% if products %}
                    {% for product in products %}
                    <tr class="group" data-item-id="{{ product.product_id }}">
                        <td>{{ product.barcode }}</td>
                        <td>{{ product.product_name }}</td>
                        <td>Â£{{ product.price }}</td>
                        <td>{{ product.net_weight }} grams</td>
                        <td onclick="deleteTableItem('groceries', '{{ product.product_id }}', 'product')">
                            <button class="delete-btn group-hover:visible invisible">Delete</button>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="3" class="text-center text-gray-500 italic py-2">
                            No products yet.
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    <a href="{{ url_for('groceries.add_product')}}" class="button">
        Add New Product
    </a>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename = 'js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename = 'js/groceries/dashboard.js') }}"></script>
{% endblock %}