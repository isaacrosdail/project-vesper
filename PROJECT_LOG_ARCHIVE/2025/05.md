## MAY, 2025 - Month 3

## [Fri 02.05.25]

**Log:**
- Refactored/renamed "Tether" â†’ "Critical Task"
- Discovered Tailwind styles require manually restarting Flask server to update ðŸ˜…
- Fixed `launch.json` to point to correct entry for F5 Debug mode + breakpoints
- Implemented delete-on-hover functionality for `Tasks` table rows
**Remaining Before Hosting:**
- Finalize and stylize delete-on-hover in `Tasks` dashboard
- Ensure checking off anchor habits works as intended
- Add input validation + warning messages for `add_task`, `add_product`, `add_transaction` templates
- Add placeholders to forms (both English & German â€” for lang toggle)
- Copy language toggle from Resume Site into Vesper
- Extend `editTableField()` to work across all `Tasks` fields (except ID)
**Next Time:**
1. Tweak `Groceries` dashboard to support delete-on-hover behavior

## [Sat 03.05.25]

**Log:**
- Added conditional product creation flow to `add_transaction` route
- Normalized/parsed form data, enabled re-submission with `net_weight` if product not found
- Cleanly separated `product` and `transaction` data
- Added fallback logic for `price` during product creation  
  *(Temporary hack â€” will remove `price` from `Product` model later)*
- Used `show_product_fields` flag to dynamically reveal required inputs
- Centralized `deleteTableItem()` JS function inside `js/utils.js`
- Enabled marking anchor habit complete via checkbox  
  â†’ also persists across reload!
- Updated endpoints to follow RESTful structure  
  â†’ adjusted tests accordingly
- Added consistent table styles in `base.html`  
  â†’ also polished "date completed" display for tasks
- Added `flash()` messages for `add_task`, `add_product`, and `add_transaction`

## [Sun 04.05.25]

**Log:**
- Began styling home dashboard cards
2. Add script to enable npm run dev to run Flask app, BrowserSync, and Tailwind watch
  - Tailwind watch + BrowserSync to update styling & reload automatically
  - Installed concurrently for this too?

## [Mon 05.05.25]

**Log:**
1. Table styling
  - Removed `.card` & `table-wrapper` remnants
  - Converted layout + visuals to Tailwind
  - Centralized table styles in `base.html`:
    - Distinct header styling for clarity
    - Alternating row stripes + hover effect (need to refine colors)
    - Red delete button
    - Standardized spacing across all tables
    - Wrapped tables in card-style divs to match home dashboard layout
2. Made `Transaction.date_scanned` timezone-aware (UTC)
3. UI Polish
  - Polished table + heading/caption styling
  - Replaced delete button text with SVG icon
4. Installed `cross-env` & set up npm run build script for Tailwind:
     
## [Tue 06.05.25]
**Git Goal:** Practice branching & merging

**Log:**
- Removed price tag from `Add Product` template

## [Sun 11.05.25]
**Goal:**
1. Auto-seed dummy data in dev mode after app startup
**Log:**
- Cleaned up `config.py` to use proper ENV flags (Flask built-in environment detection)
- Created `seed_db.py`, invoked during app creation to seed DB with dummy data
- Added `reset_db` route/function to:
  - Clear DB
  - Run `seed_db.py` again  
  - Return to previous page after reset (demo/dev quality-of-life)
  - Flow: Button â†’ `/reset_db` â†’ clears/seeds â†’ redirect

## [Tue 13.05.25]

**Goal:**
1. Add "Reset" button for dummy DB data (drop tables â†’ run `seed_data.py` again)
**Log:**
- Expanded `reset_db()` logic
- Discovered potential **PostgreSQL deadlock** when Reset DB button is pressed

## [Wed 14.05.25]

**Log:**
- Created custom `Dockerfile.postgres` to include `nano`
- Modified `package.json` to add new script:
  - `npm run debug` â†’ allows breakpoint-based debugging
- Fixed deadlock bug:
  - Cause: lingering "idle in transaction" connections  
  - Solution: clean session handling / teardown
**Next Up:**
1. Add logic to redirect `reset_db` route back to referrer page (referrer check)


## [Sun 18.05.25]

**Log:**
- Installed `python-dotenv`, created `.env` file  
  â†’ Obfuscates sensitive config (e.g., DB URI) from repo

**To implement env-based config:**
- Added Flask container config to `docker-compose.prod.yml`
- Updated `config.py` to pull values from environment variables instead of hardcoding
- Flow:
  1. `.env` â†’ contains secrets  
  2. `Config.py` reads from `.env`  
  3. Flask app gets configured  
  4. DB connects using proper URI

- Installed `gunicorn` locally to test `docker-compose.prod.yml`
  - Replaced `flask run` with gunicorn command
    - First `app`: the module (`app.py`)  
    - Second `app`: the Flask app instance inside

## [Tue 20.05.25]

**Before:**
- Configured `docker-compose.prod.yml` with proper services:
  - `db` for PostgreSQL  
  - `web` for Flask app
- Switched from `pycopg2` to `psycopg2-binary` for Docker compatibility

**Log:**
- Removed unused `pytest-postgresql`
- Cleaned up `requirements.txt` (removed unused deps)
- Added `ProdConfig` to `config.py` for production settings
- Made `create_app()` automatically use config based on `FLASK_ENV`
- Set up distinct DB URIs for different environments
- Created `wsgi.py` as prod entry point
- Set up `gunicorn` with `wsgi:app` in `Dockerfile`
- Finalized environment-aware config across codebase

---

**Project Cleanup To-Do (Post-Hosting):**
1. Write `README.md` (features, setup)
2. Refactor code structure / architecture
3. Add comments to complex logic
4. Prune comments in main + merged branches

---

**Linode Hosting Prep:**
- Installed Docker and Node.js, set up Nginx (set up Nginx to serve static directly), got a proper domain name & SSL certs

## [Wed 21.05.25]
**Goal(s):**
- Configure HTTPS access on Linode server, sort out timeout issue
- Standardize project logging format, tidy PROJECT_LOG.md
- Set up CI, establish git branch workflow
**Log:**
- Configure HTTPS - done.
- Implemented refined log format across all existing project logs
- Setting up CI/CD (continuous deployment) w/Github Actions:
	- To project root, add: .github/workflows/docker-ci.yml
	- Add SSH on server & secrets needed for CI
	- Now CI runs via Actions when we push main!
*Note: PuTTY for ssh
**Next Up:**
- Ensure local dev stuff is solid again
- Begin tackling post-hosting checklist

## [Fri 23.05.25]
**Goals:**
- Clean up obvious issues on live site first ("Â£None" and "Today's Intention:[text]")
**Log:**
- Fixed above issues
- Fixed CI pipeline issue (added --build to ensure containers rebuild)
- Removed Tailwind styles output from gitignore (silly me)
**Next Up:**
1. Clean up readme/tech stack info, w/ decisions for choices
2. 2. Clean up readme/tech stack info (with decisions for choices)
3. Sort out dev/prod database separation (dev-> personal use, prod-> demo info only)
	Options:
		- Different database URIs in .env vs production environment variables
		- Maybe different database names entirely (vesper_dev vs vesper_prod) SMART, do this!
4. Add "This Week's Improvements" feature

## [Sat 24.05.25]
**Log:**
- While syncing what I did in my resume site, I made some adjustments in Vesper to match:
	- Use more semantic HTML (header, main) in base.html
		- Wrap navbar include in `<header>`, change block content from being in a div to in `<main>`
	- Condense outside 2 wrapper divs into one in navbar.html
		- Inside that, we have LEFT div (Branding & Links) then RIGHT div (Reset DB button) -> 2 birds, 1 stone :P
	- Add cursor pointer styling for btn_classes() macro

## [Sun 25.05.25]
**Goals:**
1. Not much today, mostly worked on resume site

**Log:**
- Tweak/trim launch.json (FLASK_APP: app:create_app('dev') -> flask_app.py)
- Update font family to match resume site
- Update groceries dashboard to reference styling macros properly

**Next Up:**
- Tidy up code/comments/etc, enforce branching pipeline

## [Fri 30.05.25] - dev branch
**Goal(s):**
- Install Alembic
**Log:**
- Consolidate env configs to config.py
	- Removed redudant env detection from create_app()
	- Centralized env logic in config.py with auto-selection
	- Simplified create_app() with pre-configured Config class
	- Maintained flexibility for testing/overrides (can pass in configs to create_app() if desired)
	- Eliminated duplicate load_dotenv() calls
- Install Alembic and basic setup
- Create new Habit model, prune type and is_anchor fields from Task model accordingly
	- Cleanup/Refactor todos:
		- Add dashboard & CRUD routes
		- DONE?: Add dashboard.html and add_habit.html     
		- DONE?:  Remove anything for type="habit" and is_anchor from Add Task form/page
		- Refactor JS for index.html checkbox stuff to change API endpoints